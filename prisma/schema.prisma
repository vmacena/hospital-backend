generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model admin {
  id       Int      @id @default(autoincrement())
  record   String   @unique
  logs     logAccess[]
}

model doctor {
  id          Int      @id @default(autoincrement())
  crm         String   @unique
  nameDoctor        String
  specialty   String
  appointments appointment[]
  exams       exam[]
}

model patient {
  id          Int      @id @default(autoincrement())
  susNumber   BigInt   @unique
  namePatient        String
  email       String   @unique
  appointments appointment[]
  exams       exam[]
}

model logAccess {
  id        Int      @id @default(autoincrement())
  userId    Int
  userType  String
  timestamp DateTime @default(now())
  admin admin[]
}

model appointment {
  id         Int      @id @default(autoincrement())
  patient    patient  @relation(fields: [patientId], references: [id])
  doctor     doctor   @relation(fields: [doctorId], references: [id])
  patientId  Int
  doctorId   Int
  date       DateTime
  time       DateTime
  status     String
}

model exam {
  id         Int      @id @default(autoincrement())
  patient    patient  @relation(fields: [patientId], references: [id])
  doctor     doctor   @relation(fields: [doctorId], references: [id])
  patientId  Int
  doctorId   Int
  type       String
  date       DateTime
  result     String?
}